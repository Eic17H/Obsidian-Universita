Internet è un albero. Albero.

Un protocollo si deve inserire in un livello senza alterare il resto, e senza alterare la complessità del livello. Non male la slide 2 del documento III-2. Deve essere accessibile a ogni macchina. Meglio evitare algoritmi statici. Tollerare i problemi di ricezione. Scalabile. Rapporto costo/prestazioni.

In realtà non capisco come inizia questa frase ma va be'.

Schema \[03\]. La dorsale Europea e la dorsale Statunitense, sono separati tra di loro, e ci sono molti autonomous system within the two of them. Ce n'è uno che copre quasi tutta l'Italia per cose come università e insomma formazione superior. Poi quello per le reti personali è un altro. E sono separati da quello svedese. E così via.

Tutte le dorsali IPv6, le macchine d'accesso che utilizziamo sono IPv4.

\[05\] Version, di solito 4, talvolta 6. MPLS ci permette di instradare senza leggere tutto il casino dell'header. Identification è tipo 2 su 100, df dice che è l'ultimo, mf dice che ne arrivano altri. Quando ttl arriva a 0 viene zaccato tutto così non resta bloccato in giro. Checksum dell'intestazione. Indirizzo mittente e destinazione ovviamente. Campi opzione, posso metterci qualche informazione utile, magari timestamp router attraversati, info sulla crittografia, possono esserci qualunque numero di opzioni. Esempi \[06\].

Alla creazione di internet gli indirizzi erano a 32 bit, ma li si è divisi. Voglio separare completamente Cagliari e New York. Gli indirizzi sono dunque stati divisi in *classi*. La prima classe è la A. A ogni gestore nazionale a questo punto s anzi non capisco un cazzo vedrò il libro. Ma mi sa che i bit all'inizio ti dicono che tipo di rete è, e tipi diversi hanno suddivisione diversa per i bit.

OK ALLORA. Classe A: ho 7 bit per identificare una rete, il resto un ID per host. Ma così sono poche reti e troppo ampie. dividere il mondo in 128 reti? Poche. Invece le reti di classe C, hanno 255 possibili indirizzi host.

Il professore ha fatto assegnare a questo ateneo 32 classi c. Quindi ha 32 reti separate, con 255 possibili host ciascuna.

Questa cosa è IMPORTANTISSIMA da capire e non ho capito solo con la spiegazione, il pdf sembra chiaro.

Se legge il primo bit a 0, sa che ha a che fare con una classe A, 10 B, 110 C, 1110 D, 1111 E. Inequivocabile.

Questo è per gli indirizzi ip pubblici eh. Tra l'altro. Ne serve davvero uno per macchina? Ma no, per ogni host che deve accedere alla rete in modo identificabile. Certo potrei anche fare un gateway e poi subnet, ma è un metodo inferiore e scorretto, e a seconda del servizio neanche funziona.

Gli intervalli che possiamo davvero usare sono il B e il C.

Minchia ma tutta questa roba è spiegata bene nel librone.

Metti che ci sono, tipo, Cambridge e Oxford che mi chiedono pochi indirizzi, quindi devo fare sottoreti da trattare come reti. Seziono, *CIDR*. Indirizzi, quantità potenza di 2, il minore possibile che copre la richiesta. Magari ne vuole 2000, gliene do 2048 anziché 65mila e fruscia.

NAT, ha senso. Associa un numero fittizio che carica al livello superiore, e converte tra quello e quello privato. È un metodo non corretto ma che talvolta funziona. Se unito ad altre pratiche dubbie altrettanto comuni, può causare collisioni.

IPv4 ci sta stretto. Stanno finendo gli indirizzi. IPv6 ha 16 byte per l'indirizzamento. E non si perde l'indirizzamento originale, perché questo è un sovrainsieme.

Appunto Internet è una rete complessissima. Se aggiungo nodi, non devono rovinare ciò che già c'è. Ci sono protocolli di gestione e verifica, ne vediamo 5. Il DHCP è la versione un po' più nobile del NAT, stessa logica ma fatta bene e funziona.

Al Palazzo ci sono 5 LAN.

Ci sono più livelli. Internal Router (Palazzo, Campus Aresu, ...), connessi tra loro tramite Border Router (UniCA zona Via Ospedale, Monserrato), e bohh altri due vedi pdf. Dorsale?? Comunque l'AS 137 è quello delle università italiane, e ha un boundary router connesso al boundary router di un altro AS. La dorsale è il backbone, Palermo, Catania, ..., quelle che si agganciano sono interne, come la Sardegna. E queste sono aree di un solo AS.

Un AS alle Maldive è un AS terminale. Ci sono quelli multifunzione in mezzo, e alcuni solo di transito sempre in mezzo che quindi non comunicano con le macchine.
Argomenti di oggi:
* Ethernet
* Switch e Bridge

# Ethernet

Protocollo di tipo CSMA/CD (collision detection). Fatto nel 78, standardizzato poco dopo con IEEE 802.3 e un altro vedi slide.

10BaseX: 10 Mbps, banda base, e poi la X: 5=500m, 2= circa 200M, T=doppino, F=fibra ottica

10B5 è thick, parla troppo veloce vedi slide, tanto legge le slide. Tra l'altro il professore ha detto 182, non 185m, per 10b2.

I ripetitori estendono il segnale ma introducono ritardo. Tra due transceiver ci possono essere al massimo vedi slide.

Coi ripetitori puoi ramificare la rete, quindi trasmettere un certo tipo di segnale con alcuni, e un altro con altri.

La comunicazione ha un preambolo (10101010) per la sincronizzazione, destinazione, mittente, tipo di frame, payload, padding, checksum (per CRC rilevazione degli errori).

Indirizzo: ordinario o di gruppo. Gruppo multicast, non broadcast ma un gruppo. In realtà se fai anzi guarda slide lab sono chiare.

Il campo type di un frame ethernet. Vedi slide. Dice il protocollo.

Campo dati, max 1500B (quindi sono 1500B + 18B + preambolo). Questo limite era perché la ram dei transceiver era limitata perché costosa, e doveva starci un intero frame. Minimo 64B un frame comunque però, altrimenti il segnale dura troppo poco e non si rilevano le collisioni perché non si fa in tempo.

Padding. Ecco appunto, per raggiungere i 64B. Ma vedi slide.

Fast Ethernet, le slide sono molto chiare. La lunghezza massima, indicativamente, si divide per 10, ma non è una regola ferrea (è di rame ihih), sperimentalmente magari si nota che certi tipi sono meno limitati.

Gigabit Ethernet. Sia FE che GE sono retrocompatibile ovviamente.

# Switch

Un backplane funziona come un protocollo proprietario molto veloce. Serve per essenzialmente spostare un segnale da un canale a un altro, vedi i termini, dove, nelle slide, esatto. Adesso, i backplane sono abbastanza veloci per far trasmettere tutti i canali a piena potenza sempre. Quelli più vecchi si fidano del fatto che non succederà mai che tutti i canali trasmettano a piena potenza.

C'è una tabella per sapere come arrivare a ciascuna macchina. Se una macchina è inattiva la tolgo dalla tabella. Se mi serve una macchina non in tabella faccio flooding e in qualche modo ci arriva, così so anche dov'è.

Ritrasmissione dei dati persi.

# Bridge

Connessione punto-punto: rivedi.

Spanning tree: lo scopo dell'algoritmo è trasformare un grafo qualsiasi in un grafo aciclico, avendo percorsi unici (e minimi) tra due nodi. I percorsi minimi non lasciano nodi isolati. Se la topologia varia, lo spanning tree va ricalcolato.

Le LAN possono essere separate in VLAN (virtual lan), fai finta che siano separate così i frame non passano tra una e l'altra. O magari estendi una VLAN tra più LAN.
