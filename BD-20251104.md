# Il parziale
1h10, 6 domande aperte, 10 righe di risposta, 3 esercizi di algebra, carta d'identità

# Esercizio

```
MAGAZZINO (CodiceM key, Città, Via, NumeroCivico)
AZIENDA (CodiceA key, NomeAzienda, Città, CAP, Telefono)
PRODOTTO (CodiceP key, NomeProdotto, Azienda, Prezzo)
	FK: Azienda = AZIENDA (CodiceA)
STOCCAGGIO (Prodotto key, Magazzino key, Quantità)
	FK: Prodotto = PRODOTTO (CodiceP)
	FK: Magazzino = MAGAZZINO (CodiceM)
```

Quindi STOCCAGGIO ha una superchiave minimale.

Elencare tutti i prodotti che costano meno di 10€

```
PROJ NomeProdotto (SELECT PRODOTTO WHERE Prezzo < 10)
```

O in algebra in realtà si scrive così:

PROJ_NomeProdotto(SEL_Prezzo<10 PRODOTTO), dove _ è il pedice

Elencare i numeri civici dei magazzini di via Ripamonti a Milano

PROJ NumeroCivico (SEL Città="Milano"∧Via="Ripamonti" MAGAZZINO)

Prodotti stoccati in magazzini con stesso codice magazzino prodotto

 PROJ Prodotto (SEL Prodotto=Magazzino (STOCCAGGIO))

Prodotti delle aziende di milano

PROJ<sub>NomeProdotto</sub> (PRODOTTO JOIN<sub>Azienda=CodiceA</sub> (SELECT<sub>Città="Milano"</sub> AZIENDA))

Va bene sia il simbolo che AND, stessa cosa va bene sia π che PROJ

PROJ<sub>Magazzino</sub> (STOCCAGGIO JOIN<sub>Prodotto=CodiceP</sub> (SEL<sub>NomeProdotto="iPhone"</sub> PRODOTTO))

PROJ<sub>Città</sub> (MAGAZZINO JOIN<sub>CodiceM=Magazzino</sub> (STOCCAGGIO JOIN<sub>Prodotto=CodiceP</sub> (SEL<sub>NomeProdotto="iPhone"</sub> PRODOTTO)))

PROJ<sub>CodiceP</sub> (SEL<sub>CittàA=Città</sub> (((REN<sub>CittàA‹-Città</sub> (PRODOTTO JOIN<sub>Azienda=CodiceA</sub> AZIENDA)) JOIN<sub>CodiceP=Prodotto</sub> STOCCAGGIO) JOIN<sub>Magazzino=CodiceM</sub> MAGAZZINO))

selezionare qualcosa di non presente

(PROJ<sub>CodiceM</sub> MAGAZZINO) - (REN<sub>CodiceM‹-Magazzino</sub> (PROJ<sub>Magazzino</sub> STOCCAGGIO))

Semplice sottrazione di insiemi


C'è anche l'unione

(PROJ<sub>Città</sub> AZIENDA) U (PROJ<sub>Città</sub> MAGAZZINO)

SEL<sub>C1 != C2</sub> ((REN<sub>C1,N1 ‹- CodiceP,NomeProdotto</sub> PRODOTTO) JOIN<sub>N1 = N2</sub> (REN<sub>C2,N2 ‹- CodiceP,NomeProdotto</sub> PRODOTTO))

Volendo puoi scriverlo anche REN<sub>C1,N1,A1,P1</sub>(PRODOTTO) rinominando tutti i campi

Ricordiamo che il JOIN di base sarebbe un prodotto cartesiano totale, noi di solito usiamo il theta join che è un JOIN con un SEL